<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 980 520" role="img" aria-label="VSABrains architecture overview">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#1f2937"></path>
    </marker>
    <style>
      .frame { fill: #ffffff; stroke: rgba(0,0,0,0.08); stroke-width: 2; rx: 12; ry: 12; }
      .box { fill: #ffffff; stroke: #0f172a; stroke-width: 1.5; rx: 10; ry: 10; }
      .title { font: 600 15px system-ui, -apple-system, Segoe UI, Roboto, sans-serif; fill: #0f172a; }
      .label { font: 500 12px system-ui, -apple-system, Segoe UI, Roboto, sans-serif; fill: #334155; }
      .arrow { stroke: #1f2937; stroke-width: 1.8; fill: none; marker-end: url(#arrow); }
      .rail { stroke: #475569; stroke-width: 1.4; fill: none; }
      .col-inner { fill: #f8fafc; stroke: #cbd5e1; stroke-width: 1; rx: 8; ry: 8; }
    </style>
  </defs>

  <rect class="frame" x="6" y="6" width="968" height="508"></rect>

  <rect class="box" x="170" y="20" width="640" height="64"></rect>
  <text class="title" x="490" y="46" text-anchor="middle">Meta-Controller</text>
  <text class="label" x="490" y="66" text-anchor="middle">Regime selection from error/conflict signals</text>

  <path class="arrow" d="M 490 84 L 490 120"></path>
  <path class="rail" d="M 210 120 L 770 120"></path>
  <path class="arrow" d="M 250 120 L 250 150"></path>
  <path class="arrow" d="M 490 120 L 490 150"></path>
  <path class="arrow" d="M 730 120 L 730 150"></path>

  <rect class="box" x="80" y="150" width="240" height="176"></rect>
  <text class="title" x="200" y="176" text-anchor="middle">Column 0</text>
  <rect class="col-inner" x="100" y="192" width="200" height="34"></rect>
  <text class="label" x="200" y="214" text-anchor="middle">GridMaps (fast)</text>
  <rect class="col-inner" x="100" y="232" width="200" height="34"></rect>
  <text class="label" x="200" y="254" text-anchor="middle">GridMaps (slow)</text>
  <rect class="col-inner" x="100" y="272" width="200" height="34"></rect>
  <text class="label" x="200" y="294" text-anchor="middle">Location State</text>

  <rect class="box" x="370" y="150" width="240" height="176"></rect>
  <text class="title" x="490" y="176" text-anchor="middle">Column 1</text>
  <rect class="col-inner" x="390" y="192" width="200" height="34"></rect>
  <text class="label" x="490" y="214" text-anchor="middle">GridMaps (fast)</text>
  <rect class="col-inner" x="390" y="232" width="200" height="34"></rect>
  <text class="label" x="490" y="254" text-anchor="middle">GridMaps (slow)</text>
  <rect class="col-inner" x="390" y="272" width="200" height="34"></rect>
  <text class="label" x="490" y="294" text-anchor="middle">Location State</text>

  <rect class="box" x="660" y="150" width="240" height="176"></rect>
  <text class="title" x="780" y="176" text-anchor="middle">Column N</text>
  <rect class="col-inner" x="680" y="192" width="200" height="34"></rect>
  <text class="label" x="780" y="214" text-anchor="middle">GridMaps (fast)</text>
  <rect class="col-inner" x="680" y="232" width="200" height="34"></rect>
  <text class="label" x="780" y="254" text-anchor="middle">GridMaps (slow)</text>
  <rect class="col-inner" x="680" y="272" width="200" height="34"></rect>
  <text class="label" x="780" y="294" text-anchor="middle">Location State</text>

  <path class="arrow" d="M 200 326 L 200 360"></path>
  <path class="arrow" d="M 490 326 L 490 360"></path>
  <path class="arrow" d="M 780 326 L 780 360"></path>
  <path class="rail" d="M 200 360 L 780 360"></path>
  <path class="arrow" d="M 490 360 L 490 392"></path>

  <rect class="box" x="360" y="392" width="260" height="58"></rect>
  <text class="title" x="490" y="418" text-anchor="middle">Consensus</text>
  <text class="label" x="490" y="436" text-anchor="middle">Weighted voting across columns</text>

  <path class="arrow" d="M 490 450 L 490 472"></path>
  <path class="rail" d="M 170 472 L 810 472"></path>
  <path class="arrow" d="M 210 472 L 210 502"></path>
  <path class="arrow" d="M 490 472 L 490 502"></path>
  <path class="arrow" d="M 770 472 L 770 502"></path>

  <rect class="box" x="80" y="472" width="220" height="40"></rect>
  <text class="title" x="190" y="496" text-anchor="middle">Localizer</text>

  <rect class="box" x="370" y="472" width="220" height="40"></rect>
  <text class="title" x="480" y="496" text-anchor="middle">Episodic Store</text>

  <rect class="box" x="660" y="472" width="220" height="40"></rect>
  <text class="title" x="770" y="496" text-anchor="middle">Reasoner</text>
</svg>

